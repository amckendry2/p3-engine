function rspr(s,ca,sa,px,py,w,r_y,clr)
 w*=4
 local dxcol,dycol=ca,sa
 local dxrow,dyrow=dycol,-dxcol
 local sx,sy=(s%16)*8,flr(s/16)*8 
 local init_x=w-(w*dycol+w*dxcol)
 local init_y=w-(w*dyrow+w*dxrow)
 w*=2
 if(not r_y) then
  init_y=w-init_y
  dycol*=-1
  dyrow*=-1
 end
 for xi=0,w do
  local x,y=init_x,init_y
  for yi=0,w do
--   if band(bor(x,y),mask)==0 then
   if(x>1 and x<14 and y>1 and y<14) 
   or s==48 then
    local c=sget(sx+flr(x),sy+flr(y))
    if(c!=0) then
     	c=clr==8 and 8 or c==2 and clr or c
     	pset(px-(w/2)+xi,py-(w/2)+yi,c)
    end
   end
   x+=dxrow
   y+=dyrow
  end
  init_x+=dxcol
  init_y+=dycol
 end
 pal()
end


      
